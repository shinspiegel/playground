[gd_scene load_steps=12 format=3 uid="uid://hy5m4oryoqj2"]

[ext_resource type="PackedScene" uid="uid://bgt5h0f3fl6jx" path="res://entities/base_enemy/base_enemy.tscn" id="1_0xlli"]
[ext_resource type="Texture2D" uid="uid://6mb0gja25wlo" path="res://assets/base_template/placeholder_texture.png" id="2_jugqv"]
[ext_resource type="Script" path="res://entities/base_enemy/enemy_states/idle.gd" id="3_x4gp0"]
[ext_resource type="Script" path="res://entities/base_enemy/enemy_states/die.gd" id="4_ybk4b"]

[sub_resource type="AtlasTexture" id="AtlasTexture_uumdg"]
atlas = ExtResource("2_jugqv")
region = Rect2(8, 8, 32, 32)

[sub_resource type="CircleShape2D" id="CircleShape2D_bxa08"]
radius = 32.3183

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kg6w0"]
size = Vector2(80, 80)

[sub_resource type="Animation" id="Animation_2e4ch"]
resource_name = "Die"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 0, 0.0156863, 1)]
}

[sub_resource type="Animation" id="Animation_c43i0"]
resource_name = "Idle"
length = 0.5
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(2.08165e-12, 2.08165e-12), Vector2(2.08165e-12, -8), Vector2(2.08165e-12, 2.08165e-12)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CollisionShape2D:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(2.08165e-12, 2.08165e-12), Vector2(2.08165e-12, -8), Vector2(2.08165e-12, 2.08165e-12)]
}

[sub_resource type="Animation" id="Animation_jx0o4"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(2.08165e-12, 2.08165e-12)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CollisionShape2D:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(2.08165e-12, 2.08165e-12)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_glsf0"]
_data = {
"Die": SubResource("Animation_2e4ch"),
"Idle": SubResource("Animation_c43i0"),
"RESET": SubResource("Animation_jx0o4")
}

[node name="HoveringEnemy" instance=ExtResource("1_0xlli")]

[node name="Sprite2D" parent="." index="0"]
position = Vector2(2.08165e-12, 2.08165e-12)
texture = SubResource("AtlasTexture_uumdg")

[node name="CollisionShape2D" parent="." index="1"]
position = Vector2(2.08165e-12, 2.08165e-12)
shape = SubResource("CircleShape2D_bxa08")

[node name="HealthDetails" parent="." index="3" node_paths=PackedStringArray("zero_health_state")]
zero_health_state = NodePath("../StateMachine/Die")

[node name="HealthBar" parent="HealthDetails" index="1"]
position = Vector2(0, -56)

[node name="DamageReceiver" parent="HealthDetails" index="2" node_paths=PackedStringArray("health", "damage_number_position", "colddown")]
collision_layer = 4
health = NodePath("../Health")
damage_number_position = NodePath("Marker2D")
colddown = NodePath("DamageColddown")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HealthDetails/DamageReceiver" index="0"]
shape = SubResource("RectangleShape2D_kg6w0")

[node name="Marker2D" type="Marker2D" parent="HealthDetails/DamageReceiver" index="1"]
position = Vector2(0, -72)

[node name="DamageColddown" type="Timer" parent="HealthDetails/DamageReceiver" index="2"]
wait_time = 0.2
one_shot = true

[node name="Idle" type="Node2D" parent="StateMachine" index="0" node_paths=PackedStringArray("idle_colddown", "idle_next_state_timeout", "idle_next_state_player_sighted", "enemy", "animation_player")]
script = ExtResource("3_x4gp0")
idle_colddown = NodePath("IddleColdodn")
idle_next_state_timeout = NodePath(".")
idle_next_state_player_sighted = NodePath(".")
enemy = NodePath("../..")
animation_player = NodePath("../../AnimationPlayer")

[node name="IddleColdodn" type="Timer" parent="StateMachine/Idle" index="0"]
wait_time = 1000.0
one_shot = true

[node name="Die" type="Node2D" parent="StateMachine" index="1" node_paths=PackedStringArray("damage_receiver", "enemy", "inputs", "animation_player")]
script = ExtResource("4_ybk4b")
damage_receiver = NodePath("../../HealthDetails/DamageReceiver")
enemy = NodePath("../..")
inputs = NodePath("../../EnemyInputs")
animation_player = NodePath("../../AnimationPlayer")

[node name="AnimationPlayer" parent="." index="5"]
libraries = {
"": SubResource("AnimationLibrary_glsf0")
}
