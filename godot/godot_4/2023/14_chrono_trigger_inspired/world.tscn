[gd_scene load_steps=10 format=3 uid="uid://digwssbx8ooil"]

[ext_resource type="Script" path="res://world.gd" id="1_034ps"]
[ext_resource type="TileSet" uid="uid://coew56js04ywn" path="res://tilemap.tres" id="1_b1dug"]
[ext_resource type="PackedScene" uid="uid://s2ytaoxq36a0" path="res://actor.tscn" id="2_dvxm7"]
[ext_resource type="Resource" uid="uid://bfukqmd37indk" path="res://game_state.tres" id="2_o0arf"]
[ext_resource type="PackedScene" uid="uid://dy0sjut27553q" path="res://battle_ui.tscn" id="3_a54y4"]
[ext_resource type="PackedScene" uid="uid://bkiahrqou20wi" path="res://player.tscn" id="5_mvfgy"]
[ext_resource type="PackedScene" uid="uid://vjxyqw5glpgc" path="res://battle.tscn" id="6_n82nt"]
[ext_resource type="PackedScene" uid="uid://cghix4c48myd1" path="res://enemy.tscn" id="7_thkqi"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2tnsv"]
size = Vector2(1152, 1024)

[node name="World" type="Node2D" node_paths=PackedStringArray("battle_areas", "party")]
script = ExtResource("1_034ps")
game_state = ExtResource("2_o0arf")
battle_areas = [NodePath("Battle")]
party = [NodePath("Sorted/Player")]

[node name="Camera2D" type="Camera2D" parent="."]

[node name="BattleUI" parent="." instance=ExtResource("3_a54y4")]

[node name="Battle" parent="." node_paths=PackedStringArray("battle_ui", "watch_node", "player_pos", "camera_center_position", "camera", "enemies") instance=ExtResource("6_n82nt")]
position = Vector2(1984, 768)
collision_layer = 0
collision_mask = 2
battle_ui = NodePath("../BattleUI")
watch_node = NodePath("../Sorted/Player")
player_pos = NodePath("PlayerPosition")
camera_center_position = NodePath("CameraPoition")
camera = NodePath("../Camera2D")
enemies = [NodePath("../Sorted/BigBossEnemy"), NodePath("../Sorted/EasyEnemy"), NodePath("../Sorted/EasyEnemy2"), NodePath("../Sorted/EasyEnemy3"), NodePath("../Sorted/EasyEnemy4")]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Battle"]
shape = SubResource("RectangleShape2D_2tnsv")

[node name="PlayerPosition" type="Marker2D" parent="Battle"]
position = Vector2(-320, -256)

[node name="CameraPoition" type="Marker2D" parent="Battle"]
position = Vector2(64, 64)

[node name="Sorted" type="Node2D" parent="."]
y_sort_enabled = true

[node name="TileMap" type="TileMap" parent="Sorted"]
scale = Vector2(4, 4)
tile_set = ExtResource("1_b1dug")
format = 2
layer_0/tile_data = PackedInt32Array(-1, 589825, 2, 65535, 589825, 2, 131071, 589825, 2, 196607, 589825, 2, 262143, 589825, 2, 327679, 589825, 2, 393215, 589825, 2, 458751, 589825, 2, 524287, 589825, 2, 589823, 589825, 2, -65536, 589825, 2, 0, 393217, 2, 65536, 720897, 2, 131072, 720897, 2, 196608, 720897, 2, 262144, 720897, 2, 327680, 720897, 2, 393216, 720897, 2, 458752, 393217, 1, 524288, 589825, 2, -65535, 589825, 2, 1, 589825, 3, 524289, 720897, 2, -65534, 589825, 2, 2, 589825, 3, -65533, 589825, 2, 3, 589825, 3, -65532, 589825, 2, 4, 327681, 2, 65540, 524289, 3, 524292, 524289, 1, -65531, 589825, 2, 5, 589825, 2, 65541, 589825, 3, 524293, 589825, 2, -65530, 589825, 2, 6, 589825, 2, 65542, 589825, 3, 524294, 589825, 2, -65529, 589825, 2, 7, 589825, 2, 65543, 589825, 3, 524295, 589825, 2, -65528, 589825, 2, 8, 589825, 2, 65544, 589825, 3, 524296, 589825, 2, -65527, 589825, 2, 9, 589825, 2, 65545, 589825, 3, 524297, 589825, 2, -65526, 589825, 2, 10, 589825, 2, 65546, 589825, 3, 524298, 720897, 2, -65525, 589825, 2, 11, 589825, 2, 65547, 589825, 3, -65524, 589825, 2, 12, 589825, 2, 65548, 589825, 3, -65523, 589825, 2, 13, 589825, 2, 65549, 589825, 3, -65522, 589825, 2, 14, 589825, 2, 65550, 589825, 3, -65521, 589825, 2, 15, 589825, 2, 65551, 589825, 3, 458759, 589825, 2, 458758, 327681, 1, 458757, 655361, 0, 458756, 524289, 0, 458753, 720897, 0, 655359, 589825, 2, 720895, 589825, 2, 786431, 589825, 2, 851967, 589825, 2, 917503, 589825, 2, 983039, 589825, 2, 1048575, 589825, 2, 1114111, 589825, 2, 589824, 589825, 2, 655360, 589825, 2, 720896, 589825, 2, 786432, 589825, 2, 851968, 589825, 2, 917504, 589825, 2, 983040, 589825, 2, 1048576, 589825, 2, 589825, 720897, 2, 655361, 720897, 2, 720897, 720897, 2, 786433, 720897, 2, 851969, 720897, 2, 917505, 720897, 2, 983041, 720897, 2, 1048577, 393217, 1, 1048578, 655361, 0, 1048579, 655361, 0, 589828, 524289, 1, 655364, 524289, 1, 720900, 524289, 1, 786436, 524289, 1, 851972, 524289, 3, 1048580, 655361, 0, 589829, 589825, 2, 655365, 589825, 2, 720901, 589825, 2, 786437, 589825, 2, 851973, 589825, 3, 1048581, 655361, 0, 589830, 589825, 2, 655366, 589825, 2, 720902, 589825, 2, 786438, 589825, 2, 851974, 589825, 3, 1048582, 655361, 0, 589831, 589825, 2, 655367, 589825, 2, 720903, 589825, 2, 786439, 589825, 2, 851975, 589825, 3, 1048583, 655361, 0, 589832, 589825, 2, 655368, 589825, 2, 720904, 589825, 2, 786440, 589825, 2, 851976, 589825, 3, 1048584, 655361, 0, 589833, 589825, 2, 655369, 589825, 2, 720905, 589825, 2, 786441, 589825, 2, 851977, 589825, 3, 1048585, 655361, 0, 589834, 720897, 2, 655370, 393217, 1, 720906, 589825, 2, 786442, 589825, 2, 851978, 589825, 3, 1048586, 655361, 0, 655371, 655361, 0, 720907, 589825, 2, 786443, 589825, 2, 851979, 589825, 3, 1048587, 655361, 0, 655372, 655361, 0, 720908, 589825, 2, 786444, 589825, 2, 851980, 589825, 3, 1048588, 655361, 0, 655373, 655361, 0, 720909, 589825, 2, 786445, 589825, 2, 851981, 589825, 3, 1048589, 655361, 0, 655374, 720897, 0, 720910, 720897, 2, 786446, 720897, 2, 851982, 720897, 3, 1048590, 655361, 0, 1048591, 655361, 0, 1048592, 655361, 0, 1048593, 655361, 0, 1048594, 655361, 0, 1048595, 655361, 0, 1048596, 655361, 0, 1048597, 655361, 0, 1048598, 655361, 0, 1048599, 655361, 0, 1048600, 655361, 0, 1048601, 655361, 0, 1048602, 655361, 0, 589851, 524289, 1, 655387, 524289, 1, 720923, 524289, 1, 786459, 524289, 1, 851995, 524289, 1, 917531, 524289, 1, 983067, 524289, 1, 1048603, 327681, 1, 589852, 589825, 2, 655388, 589825, 2, 720924, 589825, 2, 786460, 589825, 2, 851996, 589825, 2, 917532, 589825, 2, 983068, 589825, 2, 1048604, 589825, 2, 589853, 589825, 2, 655389, 589825, 2, 720925, 589825, 2, 786461, 589825, 2, 851997, 589825, 2, 917533, 589825, 2, 983069, 589825, 2, 1048605, 589825, 2, -65520, 589825, 2, 16, 589825, 2, 65552, 589825, 3, -65519, 589825, 2, 17, 589825, 2, 65553, 589825, 3, -65518, 589825, 2, 18, 589825, 2, 65554, 589825, 3, -65517, 589825, 2, 19, 589825, 2, 65555, 589825, 3, -65516, 589825, 2, 20, 589825, 2, 65556, 589825, 3, -65515, 589825, 2, 21, 589825, 2, 65557, 589825, 3, -65514, 589825, 2, 22, 589825, 2, 65558, 589825, 3, -65513, 589825, 2, 23, 589825, 2, 65559, 589825, 3, -65512, 589825, 2, 24, 589825, 2, 65560, 589825, 3, -65511, 589825, 2, 25, 589825, 2, 65561, 589825, 3, -65510, 589825, 2, 26, 589825, 2, 65562, 589825, 3, -65509, 589825, 2, 27, 589825, 2, 65563, 327681, 2, 131099, 524289, 1, 196635, 524289, 1, 262171, 524289, 1, 327707, 524289, 1, 393243, 524289, 1, 458779, 524289, 1, 524315, 524289, 1, -65508, 589825, 2, 28, 589825, 2, 65564, 589825, 2, 131100, 589825, 2, 196636, 589825, 2, 262172, 589825, 2, 327708, 589825, 2, 393244, 589825, 2, 458780, 589825, 2, 524316, 589825, 2, -65507, 589825, 2, 29, 589825, 2, 65565, 589825, 2, 131101, 589825, 2, 196637, 589825, 2, 262173, 589825, 2, 327709, 589825, 2, 393245, 589825, 2, 458781, 589825, 2, 524317, 589825, 2, 458762, 720897, 2, 458761, 589825, 2, 458760, 589825, 2, 393224, 655361, 0, 393223, 655361, 0, 393226, 720897, 0, 393225, 655361, 0, 393222, 524289, 0, 589848, 589825, 2, 524312, 589825, 2, 458776, 589825, 2, 393240, 393217, 1, 327704, 720897, 2, 262168, 720897, 2, 196632, 720897, 0, 589847, 589825, 2, 524311, 589825, 2, 458775, 589825, 2, 393239, 589825, 2, 327703, 589825, 2, 262167, 589825, 2, 196631, 655361, 0, 589846, 589825, 2, 524310, 589825, 2, 458774, 589825, 2, 393238, 589825, 2, 327702, 589825, 2, 262166, 589825, 2, 196630, 655361, 0, 589845, 589825, 2, 524309, 589825, 2, 458773, 589825, 2, 393237, 589825, 2, 327701, 589825, 2, 262165, 589825, 2, 196629, 655361, 0, 589844, 524289, 1, 524308, 524289, 1, 458772, 524289, 1, 393236, 524289, 1, 327700, 524289, 1, 262164, 524289, 1, 196628, 524289, 0, 720921, 720897, 3, 655385, 720897, 2, 589849, 720897, 2, 524313, 720897, 2, 458777, 720897, 2, 393241, 720897, 0, 720920, 589825, 3, 655384, 589825, 2, 720919, 393217, 2, 655383, 589825, 2, 720918, 589825, 2, 655382, 589825, 2, 720917, 589825, 2, 655381, 589825, 2, 720916, 589825, 2, 655380, 327681, 1, 851991, 720897, 3, 786455, 720897, 2, 851990, 589825, 3, 786454, 589825, 2, 851989, 589825, 3, 786453, 589825, 2, 851988, 589825, 3, 786452, 589825, 2, 851987, 524289, 3, 786451, 524289, 1, 720915, 524289, 1, 655379, 524289, 0)

[node name="Player" parent="Sorted" node_paths=PackedStringArray("camera", "battle_ui") instance=ExtResource("5_mvfgy")]
position = Vector2(1168, 576)
camera = NodePath("../../Camera2D")
battle_ui = NodePath("../../BattleUI")

[node name="Actor" parent="Sorted" instance=ExtResource("2_dvxm7")]
position = Vector2(2128, 1232)

[node name="BigBossEnemy" parent="Sorted" instance=ExtResource("7_thkqi")]
position = Vector2(1696, 1040)
stat_hit_points = 30
stat_attack = 15
stat_defense = 10
stat_speed = 15

[node name="EasyEnemy" parent="Sorted" instance=ExtResource("7_thkqi")]
position = Vector2(2192, 512)
threat_level = 5

[node name="EasyEnemy2" parent="Sorted" instance=ExtResource("7_thkqi")]
position = Vector2(2384, 960)
threat_level = 5

[node name="EasyEnemy3" parent="Sorted" node_paths=PackedStringArray("stat_actions_container") instance=ExtResource("7_thkqi")]
position = Vector2(1952, 528)
threat_level = 5
stat_actions_container = NodePath("../EasyEnemy2/ActionList")

[node name="EasyEnemy4" parent="Sorted" node_paths=PackedStringArray("stat_actions_container") instance=ExtResource("7_thkqi")]
position = Vector2(1744, 736)
threat_level = 5
stat_actions_container = NodePath("../EasyEnemy2/ActionList")
