---
import Layout from "./Layout.astro";

interface Props {
	title?: string;
	overrideTitle?: boolean;
}

const { title, overrideTitle } = Astro.props;
---

<Layout title={title} overrideTitle={overrideTitle}>
	<slot />
</Layout>

<script>
	import { AUTH_CHECK_URL } from "../constants/routes";

	fetch(AUTH_CHECK_URL, { credentials: "include" })
		.then((res) => {
			if (!res.ok) {
				window.location.replace("/login");
			}
		})
		.catch((err) => {
			console.error(err);
			window.location.replace("/login");
		});
</script>
